{% extends "base.html" %}

{% block title %}Artists - Art Gallery{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">
        <i class="fas fa-user-tie"></i> Artists
    </h1>
    <a href="{{ url_for('add_artist') }}" class="btn btn-primary">
        <i class="fas fa-plus"></i> Add Artist
    </a>
</div>

<div class="search-box">
    <input type="text" id="searchInput" placeholder="Search artists..." onkeyup="searchTable()">
    <i class="fas fa-search"></i>
</div>

<div class="table-container">
    <table class="data-table" id="artistsTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Bio</th>
                <th>Contact Info</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% if artists %}
                {% for artist in artists %}
                <tr>
                    <td>{{ artist.artist_id }}</td>
                    <td><strong>{{ artist.Name }}</strong></td>
                    <td>{{ artist.Bio[:100] }}{% if artist.Bio|length > 100 %}...{% endif %}</td>
                    <td>{{ artist.Contact_info }}</td>
                    <td class="action-buttons">
                        <a href="{{ url_for('edit_artist', artist_id=artist.artist_id) }}" class="btn btn-sm btn-edit" title="Edit">
                            <i class="fas fa-edit"></i>
                        </a>
                        <form action="{{ url_for('delete_artist', artist_id=artist.artist_id) }}" method="POST" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this artist?');">
                            <button type="submit" class="btn btn-sm btn-delete" title="Delete">
                                <i class="fas fa-trash"></i>
                            </button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="5" class="no-data">No artists found. <a href="{{ url_for('add_artist') }}">Add your first artist</a></td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}

{% block extra_js %}
<script>
function searchTable() {
    const input = document.getElementById('searchInput');
    const filter = input.value.toUpperCase();
    const table = document.getElementById('artistsTable');
    const tr = table.getElementsByTagName('tr');

    for (let i = 1; i < tr.length; i++) {
        const td = tr[i].getElementsByTagName('td');
        let found = false;
        
        for (let j = 0; j < td.length - 1; j++) {
            if (td[j]) {
                const txtValue = td[j].textContent || td[j].innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    found = true;
                    break;
                }
            }
        }
        
        tr[i].style.display = found ? '' : 'none';
    }
}
</script>
{% endblock %}
