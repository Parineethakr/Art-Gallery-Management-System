{% extends "base.html" %}

{% block title %}Reports - Art Gallery{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">
        <i class="fas fa-chart-bar"></i> Reports & Analytics
    </h1>
</div>

<div class="reports-container">
    <!-- Top Artworks by Price -->
    <div class="report-section">
        <h2><i class="fas fa-trophy"></i> Top Artworks by Price</h2>
        {% if data.top_artworks %}
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Artist</th>
                        <th>Type</th>
                        <th>Price</th>
                    </tr>
                </thead>
                <tbody>
                    {% for artwork in data.top_artworks %}
                    <tr>
                        <td><strong>{{ artwork.Title }}</strong></td>
                        <td>{{ artwork.artist_name }}</td>
                        <td>{{ artwork.Type }}</td>
                        <td class="price">${{ "{:,.2f}".format(artwork.price) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <p class="no-data">No data available</p>
        {% endif %}
    </div>

    <!-- Artist Statistics -->
    <div class="report-section">
        <h2><i class="fas fa-user-tie"></i> Artist Statistics</h2>
        {% if data.artist_stats %}
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Artist Name</th>
                        <th>Total Artworks</th>
                        <th>Average Price</th>
                    </tr>
                </thead>
                <tbody>
                    {% for artist in data.artist_stats %}
                    <tr>
                        <td><strong>{{ artist.Name }}</strong></td>
                        <td>{{ artist.artwork_count }}</td>
                        <td class="price">${{ "{:,.2f}".format(artist.avg_price) if artist.avg_price else '0.00' }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <p class="no-data">No data available</p>
        {% endif %}
    </div>

    <!-- Upcoming Auctions -->
    <div class="report-section">
        <h2><i class="fas fa-calendar-alt"></i> Upcoming Auctions</h2>
        {% if data.upcoming_auctions %}
        <div class="auction-grid">
            {% for auction in data.upcoming_auctions %}
            <div class="auction-card">
                <div class="auction-header">
                    <h3>Auction #{{ auction.auction_id }}</h3>
                    <span class="status-badge status-upcoming">{{ auction.status }}</span>
                </div>
                <div class="auction-body">
                    <p><i class="fas fa-calendar"></i> {{ auction.auction_date }}</p>
                    <p><i class="fas fa-map-marker-alt"></i> {{ auction.location }}</p>
                </div>
                <div class="auction-actions">
                    <a href="{{ url_for('auction_detail', auction_id=auction.auction_id) }}" class="btn btn-sm btn-primary">
                        <i class="fas fa-eye"></i> View Details
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="no-data">No upcoming auctions</p>
        {% endif %}
    </div>
</div>
{% endblock %}
